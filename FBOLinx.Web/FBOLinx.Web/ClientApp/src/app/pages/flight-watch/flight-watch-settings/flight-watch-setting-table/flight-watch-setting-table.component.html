<mat-card class="flight-watch-settings-container">
    <mat-card-header>
        <mat-card-title>
            <div class="container-fluid">
                <div class="row">
                    <div class="float-left">{{getSwimDataTypeString()}}</div>
                    <div class="flight-list-settings-button">
                        <div class="actions">
                            <button
                                [matMenuTriggerFor]="gridActions"
                                mat-icon-button
                            >
                                <mat-icon
                                    aria-hidden="true"
                                    class="mat-icon material-icons"
                                    role="img"
                                    >more_vert</mat-icon
                                >
                            </button>
                            <mat-menu #gridActions="matMenu" xPosition="before">
                                <button (click)="openSettings()" mat-menu-item>
                                    Settings
                                </button>
                            </mat-menu>
                        </div>
                    </div>
                </div>
            </div>
        </mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <mat-form-field>
            <mat-label>Filter</mat-label>
            <input #input matInput (keyup)="applyFilter($event)" />
        </mat-form-field>
        <div class="flight-watch-container">
            <mat-table [dataSource]="data" matSort>
                <ng-container matColumnDef="flightDepartment">
                    <mat-header-cell *matHeaderCellDef>Flight Department</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.flightDepartment }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="tailNumber">
                    <mat-header-cell *matHeaderCellDef>Tail Number</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.tailNumber }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="make-model">
                    <mat-header-cell *matHeaderCellDef>Make/Model</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.Make }}{{ (element.Make && element.Model) ? '/':'' }} {{ element.Model }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="eta">
                    <mat-header-cell *matHeaderCellDef>ETA (Local)</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.etaLocal }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="ete">
                    <mat-header-cell *matHeaderCellDef>ETE</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.ete }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="origin-destination">
                    <mat-header-cell *matHeaderCellDef>
                        Origin/Destination
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{
                            isArrival
                                ? element.departureCity
                                : element.arrivalCity
                        }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="city">
                    <mat-header-cell *matHeaderCellDef>City</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.city }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="altitude">
                    <mat-header-cell *matHeaderCellDef>Altitude</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.altitude }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="isAircraftOnGround">
                    <mat-header-cell *matHeaderCellDef>On Ground</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.isAircraftOnGround }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="eta-atd">
                    <mat-header-cell *matHeaderCellDef>ETA/ATD</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.etaZulu }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="itpMarginTemplate">
                    <mat-header-cell *matHeaderCellDef>
                        ITP Margin Template
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.itpMarginTemplate }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="ppg">
                    <mat-header-cell *matHeaderCellDef>PPG</mat-header-cell>
                    <mat-cell *matCellDef="let element" >N/A</mat-cell>
                </ng-container>

                <ng-container matColumnDef="atd">
                    <mat-header-cell *matHeaderCellDef>ATD</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.atdLocal }}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="fuelCapacityGal">
                    <mat-header-cell *matHeaderCellDef>Fuel Capacity</mat-header-cell>
                    <mat-cell *matCellDef="let element" >
                        {{ element.fuelCapacityGal }}
                    </mat-cell>
                </ng-container>

                <mat-header-row
                    *matHeaderRowDef="visibleColumns; sticky: true"
                ></mat-header-row>
                <mat-row *matRowDef="let row; columns: visibleColumns" (click)="openPopup(row)"></mat-row>
            </mat-table>
        </div>
    </mat-card-content>
</mat-card>
