<ni-breadcrumb [menu]="breadcrumb"></ni-breadcrumb>

<div class="after-breadcrumb flight-watch-tabs">
    <mat-drawer-container autosize>
        <mat-drawer-content>
            <mat-spinner *ngIf="!flightWatchData"></mat-spinner>
            <div *ngIf="flightWatchData">
                <div class="drawer-button" (click)="openSettingsDrawer()">
                    <button class="mat-dark-blue" mat-flat-button>
                        <mat-icon *ngIf="!isDrawerOpen()"
                            >chevron_left</mat-icon
                        >
                        <mat-icon *ngIf="isDrawerOpen()"
                            >chevron_right</mat-icon
                        >
                    </button>
                </div>
                <div class="aircraft-legend">
                    <app-aircraft-legend></app-aircraft-legend>
                </div>
                <div class="flight-watch-container">
                    <app-flight-watch-map-wrapper
                        id="map-wrapper"
                        #map
                        (markerClicked)="onFlightWatchClick($event)"
                        (airportClick)="updateIcao($event.icao)"
                        (setIcaoList)="setIcaoList($event)"
                        (filterChanged)="onFilterChanged($event)"
                        (icaoChanged)="updateIcao($event)"
                        style="width: 100%"
                        [aircraftData]="selectedAircraftData"
                        [center]="center"
                        [data]="filteredFlightWatchData"
                        [isStable]="flightWatchData.length > 0"
                        [icaoList]="airportsICAO"
                        [icao]="selectedICAO"
                    ></app-flight-watch-map-wrapper>
                </div>
            </div>
        </mat-drawer-content>

        <mat-drawer
            mode="side"
            #mapfilters
            position="end"
            class="drawer-container"
            opened
        >
            <ng-container *ngIf="flightWatchData">
                <app-flight-watch-settings
                    [arrivals]="arrivals"
                    [departures]="departures"
                    [icaoList]="airportsICAO"
                    [icao]="selectedICAO"
                    [filteredTypes]="filteredTypes"
                    (filterChanged)="onFilterChanged($event)"
                    (typesFilterChanged)="onTypesFilterChanged($event)"
                    (icaoChanged)="updateIcao($event)"
                    (updateDrawerButtonPosition)="updateButtonOnDrawerResize()"
                ></app-flight-watch-settings>
            </ng-container>
        </mat-drawer>
    </mat-drawer-container>
</div>
