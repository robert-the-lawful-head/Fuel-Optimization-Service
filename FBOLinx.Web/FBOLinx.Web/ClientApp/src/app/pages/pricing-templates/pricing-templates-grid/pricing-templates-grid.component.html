<div>
    <mat-form-field>
        <input
            matInput
            (keyup)="applyFilter($event.target.value)"
            placeholder="Search by Name or Type"
            [value]="pricingTemplatesDataSource.filter"
        />
        <span matPrefix><i class="fa fa-search"></i></span>
    </mat-form-field>

    <table
        mat-table
        [dataSource]="pricingTemplatesDataSource"
        class="col-md-12"
        matSort
        matSortActive="name"
        matSortDirection="asc"
    >
        <ng-container matColumnDef="isInvalid">
            <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
            <td mat-cell *matCellDef="let pricingTemplate">
                <ni-badge
                    *ngIf="pricingTemplate.isInvalid"
                    [color]="'danger'"
                    [borderRadius]="false"
                    [arrow]="'right'"
                    [matTooltipPosition]="'after'"
                    [matTooltip]="
                        'The pricing used by this template has been hidden/disabled in the FBO Prices section.'
                    "
                    >Invalid</ni-badge
                >
            </td>
        </ng-container>

        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
            <td mat-cell *matCellDef="let pricingTemplate">
                {{ pricingTemplate.name }}
                <sup
                    *ngIf="pricingTemplate.default"
                    style="color: green; font-weight: bold;"
                    >Default</sup
                >
            </td>
        </ng-container>

        <ng-container matColumnDef="marginTypeDescription">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Pricing Type
            </th>
            <td mat-cell *matCellDef="let pricingTemplate">
                {{ pricingTemplate.marginTypeDescription }}
            </td>
        </ng-container>

        <ng-container matColumnDef="customersAssigned">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Customers Assigned
            </th>
            <td mat-cell *matCellDef="let pricingTemplate">
                {{ pricingTemplate.customersAssigned }}
            </td>
        </ng-container>

        <ng-container matColumnDef="copy">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                &nbsp;
            </th>
            <td mat-cell *matCellDef="let pricingTemplate">
                <div class="pull-right">
                    <button
                        ni-button
                        size="small"
                        style="
                            border: 1px solid black;
                            width: 70px !important;
                        "
                        [view]="'blank'"
                        beforeIcon="fa fa-copy"
                        (click)="
                            copyPricingTemplate(pricingTemplate);
                            $event.stopPropagation()
                        "
                    >
                        Copy
                    </button>
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef>
                <div class="pull-right">
                    <button
                        ni-button
                        [view]="'accent'"
                        beforeIcon="fa fa-plus"
                        (click)="addNewPricingTemplate()"
                    >
                        Add New
                    </button>
                </div>
            </th>
            <td mat-cell *matCellDef="let pricingTemplate">
                <div class="pull-right">
                    <button
                        ni-button
                        [view]="'error'"
                        size="small"
                        beforeIcon="fa fa-trash"
                        (click)="
                            deletePricingTemplate(pricingTemplate);
                            $event.stopPropagation()
                        "
                    >
                        Delete
                    </button>
                </div>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns"
            (click)="editPricingTemplate(row)"
        ></tr>
    </table>

    <div>
        <mat-paginator [length]="pricingTemplatesData.length"
                       [pageSize]="pageSizeTemplate"
                       [pageSizeOptions]="[10, 25, 50, 100]"
                       (page)="(pageIndexTemplate); onPageChanged($event)"></mat-paginator>
    </div>
</div>
