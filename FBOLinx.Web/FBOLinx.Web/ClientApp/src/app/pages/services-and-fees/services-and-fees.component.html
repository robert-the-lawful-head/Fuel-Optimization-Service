<ni-breadcrumb [menu]="breadcrumb"></ni-breadcrumb>

<div class="after-breadcrumb">
    <div *ngIf="!servicesAndFeesGridDisplay">
        <mat-spinner></mat-spinner>
    </div>
    <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel *ngFor="let service of servicesAndFeesGridDisplay">
          <mat-expansion-panel-header class="mat-elevation-z">
            <mat-panel-title>
                {{service.serviceType.name}}
            </mat-panel-title>
            <mat-panel-description *ngIf="service.serviceType.isCustom">
                <span>
                    <mat-icon>edit</mat-icon>
                </span>
                <span>
                    <mat-icon>delete</mat-icon>
                </span>
            </mat-panel-description>
            </mat-expansion-panel-header>
            <div class="row services-cards-container mat-elevation-z">
                <div class="col-5 service-card" *ngFor="let val of service.servicesAndFees">
                    <ng-container *ngIf="val.isEditMode">
                            <div class="col-6">
                                <input matInput placeholder="service Name" [(ngModel)]="val.editedValue">
                            </div>
                            <!-- Submit button -->
                            <div class="actions-buttons col-6">
                                <button
                                    (click)="saveItem(val)"
                                    class="mr-1"
                                    ni-button
                                    size="small"
                                    [view]="'accent'">
                                    Save
                                </button>
                                <button
                                    (click)="toogleEditModel(val,service.servicesAndFees)"
                                    class="mr-1"
                                    ni-button
                                    size="small"
                                    [view]="'error'">
                                    Cancel
                                </button>
                            </div>
                    </ng-container>
                    <ng-container *ngIf="!val.isEditMode">
                        <div>
                            <mat-checkbox class="example-margin" (click)="updateActiveFlag(val)"
                            [(ngModel)]="val.isActive"></mat-checkbox>
                            <span class="p-lg-3">{{val.service}}</span>
                        </div>
                        <div class="actions-buttons" *ngIf="isCustomServiceAndFee(val)">
                            <span (click)="toogleEditModel(val)"><mat-icon>edit</mat-icon></span>
                            <span (click)="deleteItem(val)"><mat-icon>delete</mat-icon></span>
                        </div>
                    </ng-container>
                </div>
            </div>
            <div class="add-button-row">
                <button ni-button [view]="'gray'" size="large" (click)="createNewItem(service.serviceType)">
                Create New Item
                </button>
            </div>
        </mat-expansion-panel>
      </mat-accordion>

    <div class="add-button-row">
        <button ni-button [view]="'gray'" size="large" (click)="createNewCategory()">
            Create New Category
        </button>
    </div>
</div>
